(this["webpackJsonpreact-app"]=this["webpackJsonpreact-app"]||[]).push([[0],{63:function(e,t,n){},64:function(e,t,n){},66:function(e,t,n){},67:function(e,t,n){},68:function(e,t,n){},69:function(e,t,n){},70:function(e,t,n){},71:function(e,t,n){},72:function(e,t,n){},73:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n(1),i=n(18),r=n(4),o=n(5),s=n(14),l=n(22),u=n(12),j=n.n(u),p="CHANGE_FIELD",d="FETCH_LIST_PROJET",m="SAVE_LIST_PROJET",b="ADD_PROJET",h="MODIF_PROJET",f="DELETE_PROJET",g="SAVE_FILE",O=function(e,t){return{type:p,newValue:e,identifier:t}},x=function(){return{type:d}},v=j.a.create({headers:{Authorization:"bearer ".concat(localStorage.getItem("token"))}}),N="https://api.guillaume-sanchez.fr",F=function(e){return function(t){return function(n){switch(n.type){case d:j.a.get("".concat(N,"/api/projet")).then((function(t){var n;e.dispatch((n=t.data,{type:m,listProjet:n}))})).catch((function(e){console.log(e)})),t(n);break;case b:var a=e.getState().projet,c=a.titre,i=a.description,r=a.status,o=a.imageFile,s=a.link,l=a.isActive;j()({method:"post",url:"".concat(N,"/api/projet"),data:{projet:{titre:c,description:i,status:r,imageUrl:o,link:s,isActive:l}}}).then((function(e){})).catch((function(e){console.log(e)})),t(n);break;case h:var u=e.getState().projet,p=u._id,g=u.titre,O=u.description,F=u.status,k=u.imageUrl,y=u.link,C=u.isActive;v({method:"put",url:"".concat(N,"/api/projet/").concat(p),data:{projet:{titre:g,description:O,status:F,imageUrl:k,link:y,isActive:C}}}).then((function(e){})).catch((function(e){console.log(e)})),t(n);break;case f:var A=e.getState().projet._id;v.delete("".concat(N,"/api/projet/").concat(A)).then((function(t){e.dispatch(x())})).catch((function(e){console.log(e)})),t(n);break;default:t(n)}}}},k="CHANGE_FIELD",y="LOG_IN",C="SAVE_USER",A=function(e,t){return{type:k,newValue:e,identifier:t}},L=function(e){return function(t){return function(n){switch(n.type){case y:var a=e.getState().auth,c=a.email,i=a.password;j()({method:"post",url:"".concat("https://api.guillaume-sanchez.fr","/api/auth/login"),data:{email:c,password:i}}).then((function(t){var n,a;e.dispatch((n=!0,a=t.data.token,{type:C,isLogged:n,token:a})),localStorage.setItem("token",t.data.token)})).catch((function(e){console.log(e)})),t(n);break;default:t(n)}}}},P=n(13),S=n(10),I={_id:"",listProjet:[],titre:"",description:"",imageUrl:"",imageFile:[],link:"",status:"",isActive:null},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case p:return Object(S.a)(Object(S.a)({},e),{},Object(P.a)({},t.identifier,t.newValue));case m:return Object(S.a)(Object(S.a)({},e),{},{listProjet:t.listProjet});case g:return Object(S.a)(Object(S.a)({},e),{},{imageFile:t.imageFile});default:return e}},w={email:"",password:"",token:"",isLogged:!1},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case k:return Object(S.a)(Object(S.a)({},e),{},Object(P.a)({},t.identifier,t.newValue));case C:return Object(S.a)(Object(S.a)({},e),{},{isLogged:t.isLogged,token:t.token});default:return e}},_=Object(s.combineReducers)({projet:E,auth:D}),T=Object(l.composeWithDevTools)(Object(s.applyMiddleware)(F,L)),U=Object(s.createStore)(_,T),z=n(3),H=(n(63),n(15)),J=(n(64),function(e){var t=e.isLogged,n=(e.token,e.changeField),i=Object(c.useState)(!1),o=Object(H.a)(i,2);o[0],o[1];return Object(a.jsxs)("header",{className:"header",children:[Object(a.jsxs)("nav",{className:"navbar navbar-expand-lg navbar navbar-light header-nav",children:[Object(a.jsx)(r.b,{className:"navbar-brand",to:"/",children:"Back-Office"}),Object(a.jsx)("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(a.jsx)("span",{className:"navbar-toggler-icon"})}),Object(a.jsx)("div",{className:"collapse navbar-collapse",id:"navbarNav",children:Object(a.jsxs)("ul",{className:"navbar-nav",children:[Object(a.jsx)("li",{className:"nav-item active deconnexion",children:Object(a.jsxs)(r.b,{className:"nav-link",to:"/new",children:["Nouveau",Object(a.jsx)("span",{className:"sr-only",children:"(current)"})]})}),Object(a.jsx)("li",{className:"nav-item active deconnexion",children:Object(a.jsxs)(r.b,{onClick:function(){n("","token"),n(!1,"isLogged")},className:"nav-link",to:"/",children:["D\xe9connexion ",Object(a.jsx)("span",{className:"sr-only",children:"(current)"})]})})]})})]}),!t&&Object(a.jsx)(z.a,{push:!0,to:"/login"})]})}),R=Object(o.b)((function(e){return{token:e.auth.token,isLogged:e.auth.isLogged}}),(function(e){return{changeField:function(t,n){e(A(t,n))}}}))(J),V=(n(66),n.p+"static/media/logo-NkDev.926553dd.png"),M=function(){return Object(a.jsx)("footer",{className:"footer",children:Object(a.jsxs)(r.b,{className:"footer-link",to:"/",children:["R\xe9alis\xe9 par ",Object(a.jsx)("img",{className:"footer-logo",src:V,alt:""})]})})},B=n(36),G=n.n(B),W=function(e){return G()(e,{lower:!0})},q=(n(67),n(68),function(e){e.fetchListProjet;var t,n=e.deleteProjet,c=e.suppr,i=e.changeField,r=e.id;return Object(a.jsx)("main",{className:"Delete",children:Object(a.jsxs)("form",{onSubmit:function(e){e.preventDefault(),i(r,"_id"),n(),c(!1)},className:"Delete-form",children:[Object(a.jsx)("h2",{className:"Delete-h2",children:"Supprimer ?"}),Object(a.jsx)("button",(t={className:"Delete-button",type:"submit"},Object(P.a)(t,"className","btn btn-primary"),Object(P.a)(t,"children","Valider"),t))]})})}),K=function(e){var t=e.changeField,n=e.listProjet,i=e.fetchListProjet,o=e.deleteProjet,s=e.isLogged,l=Object(c.useState)(!1),u=Object(H.a)(l,2),j=u[0],p=u[1],d=function(){p(!0)};return Object(c.useEffect)((function(){i()}),[]),Object(a.jsxs)("main",{className:"Home",children:[s&&Object(a.jsx)("div",{className:"Home-content container",children:Object(a.jsx)("ul",{className:"Home-ul",children:n.map((function(e){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("li",{className:"Home-li",children:[Object(a.jsx)("h3",{children:e.titre}),Object(a.jsx)(r.b,{to:"/single/".concat(W(e.titre)),children:Object(a.jsx)("button",{type:"button",className:"btn btn-warning",children:"Modifier"})}),Object(a.jsx)("button",{onClick:d,type:"button",className:"btn btn-danger",children:"Supprimer"})]},e._id),j&&Object(a.jsx)(q,{fetchListProjet:i,suppr:p,changeField:t,id:e._id,deleteProjet:o})]})}))})}),!s&&Object(a.jsx)(z.a,{push:!0,to:"/login"})]})},Q=Object(o.b)((function(e){return{listProjet:e.projet.listProjet,isLogged:e.auth.isLogged}}),(function(e){return{fetchListProjet:function(){e(x())},deleteProjet:function(){e({type:f})},changeField:function(t,n){e(O(t,n))}}}))(K),X=(n(69),function(e){var t=e.isLogged,n=(e.modifProjet,e.changeField),i=e.listProjet,r=e._id,o=e.titre,s=e.description,l=e.status,u=e.imageUrl,p=e.link,d=e.isActive,m=function(e,t){return e.find((function(e){return W(e.titre)===t}))}(i,Object(z.g)().slug),b=Object(c.useState)(null),h=Object(H.a)(b,2),f=h[0],g=h[1],O=j.a.create({headers:{Authorization:"bearer ".concat(localStorage.getItem("token"))}});return Object(c.useEffect)((function(){n(m._id,"_id"),n(m.titre,"titre"),n(m.description,"description"),n(m.status,"status"),n(m.imageUrl,"imageUrl"),n(m.link,"link"),n(m.isActive,"isActive"),n(!0,"isActive")}),[]),Object(a.jsxs)("main",{className:"Single",children:[t&&Object(a.jsx)("div",{className:"Single-content container",children:Object(a.jsxs)("form",{onSubmit:function(e){e.preventDefault(),function(e){if(e){var t=new FormData;t.append("projet",JSON.stringify(m)),t.append("titre",o),t.append("description",s),t.append("status",l),t.append("link",p),t.append("isActive",d),t.append("image",e),O.put("https://api.guillaume-sanchez.fr/api/projet/".concat(r),t).then((function(e){})).catch((function(e){}))}else{var n=new FormData;n.append("projet",JSON.stringify(m)),n.append("titre",o),n.append("description",s),n.append("status",l),n.append("link",p),n.append("isActive",d),O.put("https://api.guillaume-sanchez.fr/api/projet/".concat(r),n).then((function(e){})).catch((function(e){}))}}(f)},action:"",method:"put",children:[Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"exampleFormControlInput1",children:"Titre"}),Object(a.jsx)("input",{onChange:function(e){n(e.target.value,"titre")},value:o,type:"text",className:"form-control",id:"exampleFormControlInput1",placeholder:"titre"})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("img",{src:u,alt:""}),Object(a.jsx)("input",{className:"btn btn-success",type:"file",name:"filename","data-attribute-name":"photoPortrait",onChange:function(e){var t=e.target.files[0];console.log(t),g(t)}})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"exampleFormControlInput1",children:"Description"}),Object(a.jsx)("textarea",{onChange:function(e){n(e.target.value,"description")},value:s,type:"text",className:"form-control",id:"exampleFormControlInput1",placeholder:"description"})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"exampleFormControlInput1",children:"Status"}),Object(a.jsx)("input",{onChange:function(e){n(e.target.value,"status")},value:l,type:"text",className:"form-control",id:"exampleFormControlInput1",placeholder:"status"})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"exampleFormControlInput1",children:"Link"}),Object(a.jsx)("input",{onChange:function(e){n(e.target.value,"link")},value:p,type:"text",className:"form-control",id:"exampleFormControlInput1",placeholder:"link"})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"exampleFormControlSelect2",children:"Example multiple select"}),Object(a.jsxs)("select",{onChange:function(e){"Activ\xe9"===e.target.value?n(!0,"isActive"):"D\xe9sactiv\xe9"===e.target.value&&n(!1,"isActive")},className:"form-control",children:[Object(a.jsx)("option",{children:"Activ\xe9"}),Object(a.jsx)("option",{children:"D\xe9sactiv\xe9"})]})]}),Object(a.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Envoyer"})]})}),!t&&Object(a.jsx)(z.a,{push:!0,to:"/login"})]})}),Y=Object(o.b)((function(e){return{_id:e.projet._id,titre:e.projet.titre,description:e.projet.description,status:e.projet.status,imageUrl:e.projet.imageUrl,link:e.projet.link,isActive:e.projet.isActive,listProjet:e.projet.listProjet,isLogged:e.auth.isLogged}}),(function(e){return{changeField:function(t,n){e(O(t,n))},modifProjet:function(){e({type:h})}}}))(X),Z=(n(70),function(e){var t=e.isLogged,n=e.changeField,i=e.titre,r=e.description,o=e.status,s=e.link,l=e.isActive,u=(e.token,Object(c.useState)(null)),p=Object(H.a)(u,2),d=p[0],m=p[1],b=j.a.create({headers:{Authorization:"bearer ".concat(localStorage.getItem("token"))}});return Object(c.useEffect)((function(){n(!0,"isActive")}),[]),Object(a.jsxs)("main",{className:"Single",children:[t&&Object(a.jsx)("div",{className:"Single-content container",children:Object(a.jsxs)("form",{onSubmit:function(e){e.preventDefault(),function(e){var t=new FormData;t.append("titre",i),t.append("description",r),t.append("status",o),t.append("link",s),t.append("isActive",l),t.append("image",e),b.post("https://api.guillaume-sanchez.fr/api/projet",t).then((function(e){})).catch((function(e){}))}(d)},action:"",method:"post",children:[Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"exampleFormControlInput1",children:"Titre"}),Object(a.jsx)("input",{onChange:function(e){n(e.target.value,"titre")},type:"text",className:"form-control",id:"exampleFormControlInput1",placeholder:"titre"})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("img",{src:"",alt:""}),Object(a.jsx)("input",{className:"btn btn-success",type:"file",name:"filename","data-attribute-name":"photoPortrait",onChange:function(e){var t=e.target.files[0];m(t)}})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"exampleFormControlInput1",children:"Description"}),Object(a.jsx)("textarea",{onChange:function(e){n(e.target.value,"description")},type:"text",className:"form-control",id:"exampleFormControlInput1",placeholder:"description"})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"exampleFormControlInput1",children:"Status"}),Object(a.jsx)("input",{onChange:function(e){n(e.target.value,"status")},type:"text",className:"form-control",id:"exampleFormControlInput1",placeholder:"status"})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"exampleFormControlInput1",children:"Link"}),Object(a.jsx)("input",{onChange:function(e){n(e.target.value,"link")},type:"text",className:"form-control",id:"exampleFormControlInput1",placeholder:"link"})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"exampleFormControlSelect2",children:"Example multiple select"}),Object(a.jsxs)("select",{onChange:function(e){"Activ\xe9"===e.target.value?n(!0,"isActive"):"D\xe9sactiv\xe9"===e.target.value&&n(!1,"isActive")},className:"form-control",children:[Object(a.jsx)("option",{children:"Activ\xe9"}),Object(a.jsx)("option",{children:"D\xe9sactiv\xe9"})]})]}),Object(a.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Envoyer"})]})}),!t&&Object(a.jsx)(z.a,{push:!0,to:"/login"})]})}),$=Object(o.b)((function(e){return{titre:e.projet.titre,description:e.projet.description,status:e.projet.status,imageFile:e.projet.imageUrl,link:e.projet.link,isActive:e.projet.isActive,isLogged:e.auth.isLogged,token:e.auth.token}}),(function(e){return{changeField:function(t,n){e(O(t,n))},saveFile:function(t){e(function(e){return{type:g,imageFile:e}}(t))},addProjet:function(){e({type:b})}}}))(Z),ee=(n(71),function(e){var t=e.changeField,n=e.logIn,c=(e.email,e.password,e.isLogged);return Object(a.jsxs)("main",{className:"Exemple",children:[!c&&Object(a.jsx)("div",{className:"Exemple-content",children:Object(a.jsxs)("form",{onSubmit:function(e){e.preventDefault(),n()},action:"",method:"post",children:[Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("small",{id:"emailHelp",className:"form-text text-muted",children:"Back-Office guillaume-sanchez.fr"}),Object(a.jsx)("label",{htmlFor:"exampleInputEmail1",children:"Adresse Email"}),Object(a.jsx)("input",{onChange:function(e){t(e.target.value,"email")},type:"email",className:"form-control",id:"exampleInputEmail1","aria-describedby":"emailHelp"})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"exampleInputPassword1",children:"Mot de Passe"}),Object(a.jsx)("input",{onChange:function(e){t(e.target.value,"password")},type:"password",className:"form-control",id:"exampleInputPassword1"})]}),Object(a.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Connexion"})]})}),c&&Object(a.jsx)(z.a,{push:!0,to:"/"})]})}),te=Object(o.b)((function(e){return{email:e.auth.listProjet,password:e.auth.listProjet,isLogged:e.auth.isLogged}}),(function(e){return{changeField:function(t,n){e(A(t,n))},logIn:function(){e({type:y})}}}))(ee),ne=(n(72),function(){return Object(a.jsx)("main",{className:"error404",children:Object(a.jsxs)("div",{className:"error404-content",children:[Object(a.jsx)("h1",{children:"Error 404"}),Object(a.jsx)(r.b,{to:"/",children:"Retourner \xe0 l'accueil"})]})})}),ae=function(e){var t=e.fetchListProjet;return Object(c.useEffect)((function(){t()}),[]),Object(a.jsxs)("div",{className:"app",children:[Object(a.jsxs)(z.d,{children:[Object(a.jsxs)(z.b,{path:"/",exact:!0,children:[Object(a.jsx)(R,{}),Object(a.jsx)(Q,{})]}),Object(a.jsxs)(z.b,{path:"/single/:slug",children:[Object(a.jsx)(R,{}),Object(a.jsx)(Y,{})]}),Object(a.jsxs)(z.b,{path:"/new",children:[Object(a.jsx)(R,{}),Object(a.jsx)($,{})]}),Object(a.jsx)(z.b,{path:"/login",children:Object(a.jsx)(te,{})}),Object(a.jsx)(z.b,{path:"*",children:Object(a.jsx)(ne,{})})]}),Object(a.jsx)(M,{})]})},ce=Object(o.b)((function(e){return{}}),(function(e){return{fetchListProjet:function(){e(x())}}}))(ae),ie=Object(a.jsx)(o.a,{store:U,children:Object(a.jsx)(r.a,{children:Object(a.jsx)(ce,{})})}),re=document.getElementById("root");Object(i.render)(ie,re)}},[[73,1,2]]]);
//# sourceMappingURL=main.48e73743.chunk.js.map